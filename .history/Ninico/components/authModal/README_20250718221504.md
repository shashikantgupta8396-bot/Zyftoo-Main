# Auth Modal Components

This folder contains modular authentication components that replace the monolithic LoginModal step logic.

## Components Overview

### 1. `LoginStep.js`
- **Purpose**: Handles initial login/signup phone number entry
- **Features**: 
  - Phone number validation
  - Signup flow initiation
  - Forgot password flow initiation
- **Navigation**: 
  - → `login-password` (for existing users)
  - → `signupOtp` (for new users)
  - → `forgotOtp` (for password reset)

### 2. `LoginPasswordStep.js`
- **Purpose**: Handles password entry and login authentication
- **Features**:
  - Password input
  - Encrypted login API call
  - Token storage and user context management
- **Navigation**: 
  - → `success` (on successful login)

### 3. `OtpStep.js`
- **Purpose**: Reusable OTP verification component
- **Features**:
  - 6-digit OTP input
  - Purpose-based verification (signup/reset)
  - Dynamic title based on purpose
- **Props**: `purpose` - 'signup' or 'reset'
- **Navigation**:
  - → `register` (for signup purpose)
  - → `password-reset` (for reset purpose)

### 4. `PasswordResetStep.js`
- **Purpose**: Handles new password creation during reset flow
- **Features**:
  - New password input
  - Password confirmation
  - Encrypted password reset API call
- **Navigation**: 
  - → `register-success`

### 5. `RegisterStep.js`
- **Purpose**: Handles user registration form
- **Features**:
  - Complete user profile form
  - Corporate user toggle
  - Dynamic corporate fields
  - Encrypted registration API call
- **Navigation**: 
  - → `register-success`

### 6. `SuccessStep.js`
- **Purpose**: Shows login success message
- **Features**:
  - Success confirmation
  - Continue shopping button
- **Navigation**: Closes modal

### 7. `RegisterSuccessStep.js`
- **Purpose**: Shows registration success message
- **Features**:
  - Success confirmation
  - Continue shopping or back to login options
- **Navigation**: 
  - → `login` (back to login)
  - → Closes modal

## Benefits of This Structure

1. **Modularity**: Each step is a separate, focused component
2. **Reusability**: OtpStep can be used for both signup and reset flows
3. **Maintainability**: Easier to debug and modify individual steps
4. **Code Organization**: Clear separation of concerns
5. **Testing**: Each component can be unit tested independently
6. **Performance**: Better tree-shaking and code splitting potential

## Usage in LoginModal

The main LoginModal now uses conditional rendering with these components:

\`\`\`jsx
{step === 'login' && <LoginStep {...props} />}
{step === 'login-password' && <LoginPasswordStep {...props} />}
{step === 'signupOtp' && <OtpStep purpose="signup" {...props} />}
{step === 'forgotOtp' && <OtpStep purpose="reset" {...props} />}
// ... etc
\`\`\`

## Shared Props Pattern

All components receive:
- State setters for navigation (`setStep`, `setToast`)
- Form field values and setters
- Context functions (login, etc.)

This maintains the same functionality while improving code organization.
