{
    "sourceFile": "Ninico/components/admin/UsersPage.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1752833729959,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1753281657428,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n   const [loading, setLoading] = useState(true)\r\n   const [error, setError] = useState('')\r\n \r\n   // Hardcoded admin token for testing\r\n-  const ADMIN_TOKEN = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NzZhYTJmYzc3YWY4ODU3Njk1ZDA5MiIsInJvbGUiOiJhZG1pbiIsImlhdCI6MTc1MjYwNzMyMCwiZXhwIjoxNzUzMjEyMTIwfQ.ugFuaDCq_ewqIE-dZaql3BB91kaXBIxE0TQmqdYnagI'\r\n+  const ADMIN_TOKEN = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NzZhYTJmYzc3YWY4ODU3Njk1ZDA5MiIsInJvbGUiOiJhZG1pbiIsImlhdCI6MTc1MzI4MTMyMCwiZXhwIjoxNzUzODg2MTIwfQ.3wEx7ZCDvYtUQppFM9CcXjhG1zTQX9_RYY_dy3Y6MZs'\r\n \r\n   useEffect(() => {\r\n     async function fetchUsers() {\r\n       setLoading(true)\r\n"
                }
            ],
            "date": 1752833729959,
            "name": "Commit-0",
            "content": "\"use client\"\r\nimport { useState, useEffect } from 'react'\r\nimport AddUserPage from './AddUserPage'\r\nimport { get } from '@/util/apiService'\r\nimport { USER } from '@/util/apiEndpoints'\r\n\r\nexport default function UsersPage() {\r\n  const [showAddUser, setShowAddUser] = useState(false)\r\n  const [users, setUsers] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState('')\r\n\r\n  // Hardcoded admin token for testing\r\n  const ADMIN_TOKEN = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY4NzZhYTJmYzc3YWY4ODU3Njk1ZDA5MiIsInJvbGUiOiJhZG1pbiIsImlhdCI6MTc1MjYwNzMyMCwiZXhwIjoxNzUzMjEyMTIwfQ.ugFuaDCq_ewqIE-dZaql3BB91kaXBIxE0TQmqdYnagI'\r\n\r\n  useEffect(() => {\r\n    async function fetchUsers() {\r\n      setLoading(true)\r\n      setError('')\r\n      try {\r\n        console.log('Fetching users from API...')\r\n        \r\n        // Temporarily store admin token\r\n        localStorage.setItem('authToken', ADMIN_TOKEN)\r\n        \r\n        const response = await get(USER.GET_ALL)\r\n        console.log('Response:', response)\r\n        \r\n        if (!response.success) throw new Error(response.message || 'Failed to fetch users')\r\n        setUsers(response.data)\r\n      } catch (err) {\r\n        setError(err.message)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n    fetchUsers()\r\n  }, [])\r\n  return (\r\n    <div className=\"container-fluid\">\r\n      {/* Page Header */}\r\n      <div className=\"row mb-4\">\r\n        <div className=\"col-12\">\r\n          <div className=\"d-flex justify-content-between align-items-center\">\r\n            <h2 className=\"fw-bold text-dark mb-0\">Users Management</h2>\r\n            <button className=\"btn btn-success\" onClick={() => setShowAddUser(true)}>\r\n              <i className=\"bi bi-plus-circle me-2\"></i>\r\n              Add New User\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters Row */}\r\n      <div className=\"row mb-4\">\r\n        <div className=\"col-12\">\r\n          <div className=\"card border-0 shadow-sm\">\r\n            <div className=\"card-body\">\r\n              <div className=\"row g-3\">\r\n                <div className=\"col-md-3\">\r\n                  <label className=\"form-label\">Search Users</label>\r\n                  <input type=\"text\" className=\"form-control\" placeholder=\"Search by name, email...\" />\r\n                </div>\r\n                <div className=\"col-md-2\">\r\n                  <label className=\"form-label\">Status</label>\r\n                  <select className=\"form-select\">\r\n                    <option>All Status</option>\r\n                    <option>Active</option>\r\n                    <option>Inactive</option>\r\n                  </select>\r\n                </div>\r\n                <div className=\"col-md-2\">\r\n                  <label className=\"form-label\">Role</label>\r\n                  <select className=\"form-select\">\r\n                    <option>All Roles</option>\r\n                    <option>Admin</option>\r\n                    <option>Customer</option>\r\n                    <option>Vendor</option>\r\n                  </select>\r\n                </div>\r\n                <div className=\"col-md-2\">\r\n                  <label className=\"form-label\">&nbsp;</label>\r\n                  <button className=\"btn btn-primary w-100\">\r\n                    <i className=\"bi bi-search me-2\"></i>Filter\r\n                  </button>\r\n                </div>\r\n                <div className=\"col-md-2\">\r\n                  <label className=\"form-label\">&nbsp;</label>\r\n                  <button className=\"btn btn-outline-secondary w-100\">Reset</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Users Table */}\r\n      <div className=\"row\">\r\n        <div className=\"col-12\">\r\n          <div className=\"card border-0 shadow-sm\">\r\n            <div className=\"card-header bg-white border-bottom\">\r\n              <h5 className=\"mb-0 fw-semibold\">All Users</h5>\r\n            </div>\r\n            <div className=\"card-body p-0\">\r\n              <div className=\"table-responsive\">\r\n                <table className=\"table table-hover mb-0\">\r\n                  <thead className=\"table-light\">\r\n                    <tr>\r\n                      <th className=\"ps-4\">\r\n                        <input type=\"checkbox\" className=\"form-check-input\" />\r\n                      </th>\r\n                      <th>User</th>\r\n                      <th>Email</th>\r\n                      <th>phone</th>\r\n                      <th>userType</th>\r\n                      <th>Status</th>\r\n                      <th>Last Login</th>\r\n                      <th className=\"text-center\">Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {loading ? (\r\n                      <tr>\r\n                        <td colSpan=\"8\" className=\"text-center py-5 text-muted\">Loading users...</td>\r\n                      </tr>\r\n                    ) : error ? (\r\n                      <tr>\r\n                        <td colSpan=\"8\" className=\"text-center py-5 text-danger\">{error}</td>\r\n                      </tr>\r\n                    ) : users.length === 0 ? (\r\n                      <tr>\r\n                        <td colSpan=\"8\" className=\"text-center py-5 text-muted\">\r\n                          <i className=\"bi bi-people\" style={{ fontSize: '3rem' }}></i>\r\n                          <p className=\"mt-2\">No users found</p>\r\n                          <button className=\"btn btn-success\" onClick={() => setShowAddUser(true)}>\r\n                            <i className=\"bi bi-plus-circle me-2\"></i>\r\n                            Add First User\r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    ) : (\r\n                      users.map(user => (\r\n                        <tr key={user._id}>\r\n                          <td className=\"ps-4\"><input type=\"checkbox\" className=\"form-check-input\" /></td>\r\n                          <td>{user.name}</td>\r\n                          <td>{user.email}</td>\r\n                          <td>{user.phone}</td>\r\n                          <td>{user.userType}</td>\r\n                          <td>{user.status}</td>\r\n                          <td>{user.lastLogin ? new Date(user.lastLogin).toLocaleString() : '-'}</td>\r\n                          <td className=\"text-center\">\r\n                            {/* Actions: Edit/Delete/Status Toggle can be added here */}\r\n                            <button className=\"btn btn-sm btn-outline-primary me-1\">Edit</button>\r\n                            <button className=\"btn btn-sm btn-outline-danger\">Delete</button>\r\n                          </td>\r\n                        </tr>\r\n                      ))\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Add User Modal */}\r\n      {showAddUser && (\r\n        <div className=\"modal fade show\" style={{display:'block', background:'rgba(0,0,0,0.3)'}} tabIndex={-1}>\r\n          <div className=\"modal-dialog modal-lg modal-dialog-centered\">\r\n            <div className=\"modal-content\">\r\n              <div className=\"modal-header\">\r\n                <h5 className=\"modal-title\">Add New User</h5>\r\n                <button type=\"button\" className=\"btn-close\" onClick={() => setShowAddUser(false)}></button>\r\n              </div>\r\n              <div className=\"modal-body\">\r\n                <AddUserPage onSuccess={() => setShowAddUser(false)} onCancel={() => setShowAddUser(false)} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"
        }
    ]
}