{
    "sourceFile": "Ninico/components/admin/PagesManagement/CategoryConfigModal/CategorySelection.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1753451436535,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1753451436535,
            "name": "Commit-0",
            "content": "'use client'\r\nimport React from 'react'\r\nimport MainCategoriesList from '../MainCategoriesList'\r\nimport SubcategoriesList from '../SubcategoriesList'\r\nimport QuickActions from '../QuickActions'\r\n\r\nexport default function CategorySelection({\r\n  availableCategories,\r\n  subcategories,\r\n  categoryConfig,\r\n  setCategoryConfig,\r\n  selectedMainCategory,\r\n  setSelectedMainCategory,\r\n  handleCategoryToggle,\r\n  getCurrentCounts,\r\n  MAX_MAIN_CATEGORIES,\r\n  MAX_SUBCATEGORIES_PER_CATEGORY,\r\n  setError\r\n}) {\r\n  console.log('ðŸŽ¨ === RENDERING CATEGORY SELECTION ===')\r\n  console.log('1. Available categories:', availableCategories.length)\r\n  console.log('2. Available subcategories:', subcategories.length)\r\n  \r\n  const mainCategories = availableCategories.filter(cat => !cat.parent)\r\n  const subCategories = subcategories\r\n  \r\n  console.log('3. Main categories:', mainCategories.length)\r\n  console.log('4. Sub categories:', subCategories.length)\r\n  \r\n  // Get subcategories for selected main category\r\n  const getSubcategoriesForCategory = (categoryId) => {\r\n    console.log('ðŸ” Getting subcategories for category ID:', categoryId)\r\n    const filtered = subCategories.filter(subCat => {\r\n      const parentId = subCat.parent?._id || subCat.parent\r\n      return parentId === categoryId\r\n    })\r\n    console.log(`   - Found ${filtered.length} subcategories for category ${categoryId}:`, filtered)\r\n    return filtered\r\n  }\r\n\r\n  // Auto-select first main category if none selected\r\n  if (!selectedMainCategory && mainCategories.length > 0) {\r\n    setSelectedMainCategory(mainCategories[0].id)\r\n  }\r\n\r\n  const selectedCategorySubcategories = selectedMainCategory ? \r\n    getSubcategoriesForCategory(selectedMainCategory) : []\r\n\r\n  return (\r\n    <>\r\n      {/* Category Selection Interface */}\r\n      <div className=\"row mb-4\">\r\n        <div className=\"col-12\">\r\n          <label className=\"form-label fw-semibold mb-3\">Select Categories and Subcategories</label>\r\n          \r\n          {mainCategories.length > 0 ? (\r\n            <div className=\"row\">\r\n              {/* Left Side - Main Categories */}\r\n              <div className=\"col-md-6\">\r\n                <MainCategoriesList \r\n                  mainCategories={mainCategories}\r\n                  categoryConfig={categoryConfig}\r\n                  selectedMainCategory={selectedMainCategory}\r\n                  setSelectedMainCategory={setSelectedMainCategory}\r\n                  handleCategoryToggle={handleCategoryToggle}\r\n                  getSubcategoriesForCategory={getSubcategoriesForCategory}\r\n                  getCurrentCounts={getCurrentCounts}\r\n                />\r\n              </div>\r\n\r\n              {/* Right Side - Subcategories */}\r\n              <div className=\"col-md-6\">\r\n                <SubcategoriesList \r\n                  mainCategories={mainCategories}\r\n                  selectedMainCategory={selectedMainCategory}\r\n                  selectedCategorySubcategories={selectedCategorySubcategories}\r\n                  categoryConfig={categoryConfig}\r\n                  setCategoryConfig={setCategoryConfig}\r\n                  handleCategoryToggle={handleCategoryToggle}\r\n                />\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-5\">\r\n              <i className=\"bi bi-folder2-open text-muted\" style={{ fontSize: '3rem' }}></i>\r\n              <p className=\"mt-2 text-muted\">No categories available</p>\r\n              <small className=\"text-muted\">Create categories first to configure this section.</small>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Quick Actions */}\r\n      {mainCategories.length > 0 && (\r\n        <QuickActions \r\n          mainCategories={mainCategories}\r\n          selectedMainCategory={selectedMainCategory}\r\n          getSubcategoriesForCategory={getSubcategoriesForCategory}\r\n          categoryConfig={categoryConfig}\r\n          setCategoryConfig={setCategoryConfig}\r\n          getCurrentCounts={getCurrentCounts}\r\n          MAX_MAIN_CATEGORIES={MAX_MAIN_CATEGORIES}\r\n          MAX_SUBCATEGORIES_PER_CATEGORY={MAX_SUBCATEGORIES_PER_CATEGORY}\r\n          setError={setError}\r\n          setSelectedMainCategory={setSelectedMainCategory}\r\n        />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n"
        }
    ]
}