{
    "sourceFile": "Ninico/components/admin/sections/CategoryConfigModal.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1753289008406,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1753456327308,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,11 @@\n   handleMaxCategoriesChange,\r\n   saveCategoryConfig,\r\n   loading,\r\n   error,\r\n-  setError\r\n+  setError,\r\n+  selectedPage,\r\n+  ADMIN_TOKEN\r\n }) {\r\n   if (!showModal) return null\r\n \r\n   const MAX_MAIN_CATEGORIES = 10\r\n@@ -75,11 +77,10 @@\n                 />\r\n \r\n                 {/* Current Selections Display */}\r\n                 <CurrentSelections\r\n-                  categoryConfig={categoryConfig}\r\n-                  availableCategories={availableCategories}\r\n-                  subcategories={subcategories}\r\n+                  pageId={selectedPage}\r\n+                  token={ADMIN_TOKEN}\r\n                 />\r\n \r\n                 {/* Selection Summary Info */}\r\n                 <div className=\"row mb-4\">\r\n"
                }
            ],
            "date": 1753289008406,
            "name": "Commit-0",
            "content": "import React from 'react'\r\nimport CategorySettings from './CategorySettings'\r\nimport CategorySelectionSummary from './CategorySelectionSummary'\r\nimport CurrentSelections from './CurrentSelections'\r\nimport CategorySelector from './CategorySelector'\r\n\r\nexport default function CategoryConfigModal({\r\n  showModal,\r\n  onClose,\r\n  categoryConfig,\r\n  setCategoryConfig,\r\n  availableCategories,\r\n  subcategories,\r\n  selectedMainCategory,\r\n  setSelectedMainCategory,\r\n  getCurrentCounts,\r\n  handleCategoryToggle,\r\n  handleMaxCategoriesChange,\r\n  saveCategoryConfig,\r\n  loading,\r\n  error,\r\n  setError\r\n}) {\r\n  if (!showModal) return null\r\n\r\n  const MAX_MAIN_CATEGORIES = 10\r\n  const MIN_MAIN_CATEGORIES = 1\r\n  const MAX_SUBCATEGORIES_PER_CATEGORY = 10\r\n\r\n  return (\r\n    <div className=\"modal show d-block\" style={{ backgroundColor: 'rgba(0,0,0,0.5)' }}>\r\n      <div className=\"modal-dialog modal-xl\">\r\n        <div className=\"modal-content\">\r\n          <div className=\"modal-header\">\r\n            <h5 className=\"modal-title\">\r\n              <i className=\"bi bi-grid-3x3-gap me-2\"></i>\r\n              Category Section Configuration\r\n            </h5>\r\n            <button \r\n              type=\"button\" \r\n              className=\"btn-close\" \r\n              onClick={onClose}\r\n            ></button>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            {/* Error Display */}\r\n            {error && (\r\n              <div className=\"alert alert-danger d-flex align-items-center mb-4\">\r\n                <i className=\"bi bi-exclamation-triangle me-2\"></i>\r\n                <div>{error}</div>\r\n                <button \r\n                  type=\"button\" \r\n                  className=\"btn-close ms-auto\" \r\n                  onClick={() => setError('')}\r\n                ></button>\r\n              </div>\r\n            )}\r\n\r\n            {/* Basic Settings */}\r\n            <CategorySettings\r\n              categoryConfig={categoryConfig}\r\n              setCategoryConfig={setCategoryConfig}\r\n              handleMaxCategoriesChange={handleMaxCategoriesChange}\r\n            />\r\n\r\n            {categoryConfig.enabled && (\r\n              <>\r\n                {/* Selection Summary */}\r\n                <CategorySelectionSummary\r\n                  getCurrentCounts={getCurrentCounts}\r\n                  selectedMainCategory={selectedMainCategory}\r\n                  MAX_MAIN_CATEGORIES={MAX_MAIN_CATEGORIES}\r\n                  MIN_MAIN_CATEGORIES={MIN_MAIN_CATEGORIES}\r\n                  MAX_SUBCATEGORIES_PER_CATEGORY={MAX_SUBCATEGORIES_PER_CATEGORY}\r\n                />\r\n\r\n                {/* Current Selections Display */}\r\n                <CurrentSelections\r\n                  categoryConfig={categoryConfig}\r\n                  availableCategories={availableCategories}\r\n                  subcategories={subcategories}\r\n                />\r\n\r\n                {/* Selection Summary Info */}\r\n                <div className=\"row mb-4\">\r\n                  <div className=\"col-12\">\r\n                    <div className=\"alert alert-info d-flex align-items-center\">\r\n                      <i className=\"bi bi-info-circle me-2\"></i>\r\n                      <div>\r\n                        <strong>Selection Summary:</strong> {categoryConfig.categoryIds.length} categories selected \r\n                        ({categoryConfig.categoryIds.filter(id => availableCategories.some(cat => cat.id === id && !cat.parent)).length} main categories, {categoryConfig.categoryIds.filter(id => subcategories.some(cat => cat.id === id)).length} subcategories)\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Category Selection Interface */}\r\n                <CategorySelector\r\n                  availableCategories={availableCategories}\r\n                  subcategories={subcategories}\r\n                  categoryConfig={categoryConfig}\r\n                  selectedMainCategory={selectedMainCategory}\r\n                  setSelectedMainCategory={setSelectedMainCategory}\r\n                  handleCategoryToggle={handleCategoryToggle}\r\n                  getCurrentCounts={getCurrentCounts}\r\n                  MAX_SUBCATEGORIES_PER_CATEGORY={MAX_SUBCATEGORIES_PER_CATEGORY}\r\n                />\r\n              </>\r\n            )}\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button \r\n              type=\"button\" \r\n              className=\"btn btn-secondary\" \r\n              onClick={onClose}\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button \r\n              type=\"button\" \r\n              className=\"btn btn-primary\" \r\n              onClick={saveCategoryConfig}\r\n              disabled={loading}\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <span className=\"spinner-border spinner-border-sm me-2\"></span>\r\n                  Saving...\r\n                </>\r\n              ) : (\r\n                'Save Configuration'\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"
        }
    ]
}