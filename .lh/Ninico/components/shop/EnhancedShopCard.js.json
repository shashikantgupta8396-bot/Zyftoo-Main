{
    "sourceFile": "Ninico/components/shop/EnhancedShopCard.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1753640931825,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1753640931825,
            "name": "Commit-0",
            "content": "'use client'\r\nimport Link from \"next/link\"\r\nimport { useContext } from \"react\"\r\nimport AuthContext from '@/components/context/AuthContext'\r\nimport { getDisplayPrice, formatPrice, shouldShowCorporatePricing } from '@/util/productPricingHelper'\r\n\r\nconst EnhancedShopCard = ({ item, addToCart, addToWishlist }) => {\r\n    const { user } = useContext(AuthContext)\r\n    \r\n    // Convert legacy item format to new pricing format for compatibility\r\n    const enhancedItem = {\r\n        ...item,\r\n        price: item.price?.max * 100 || 0, // Legacy compatibility\r\n        retailPrice: item.retailPrice || {\r\n            mrp: item.price?.max * 100 || 0,\r\n            sellingPrice: item.price?.max * 100 || 0,\r\n            discount: 0,\r\n            currency: 'INR'\r\n        },\r\n        corporatePricing: item.corporatePricing || { enabled: false }\r\n    }\r\n\r\n    const pricingInfo = getDisplayPrice(enhancedItem, user, 1)\r\n    const isCorporateUser = user?.userType === 'Corporate'\r\n    const showCorporateFeatures = shouldShowCorporatePricing(user, enhancedItem)\r\n\r\n    // Determine the appropriate detail page URL\r\n    const detailUrl = isCorporateUser && enhancedItem.corporatePricing?.enabled \r\n        ? `/corporate/shop-details/${item.id}` \r\n        : `/shop-details/${item.id}`\r\n\r\n    return (\r\n        <>\r\n            <div className=\"col\">\r\n                <div className=\"tpproduct tpproductitem mb-15 p-relative\">\r\n                    {/* Corporate Badge */}\r\n                    {showCorporateFeatures && (\r\n                        <div className=\"position-absolute\" style={{ top: '10px', left: '10px', zIndex: 10 }}>\r\n                            <span className=\"badge bg-primary\">Corporate</span>\r\n                        </div>\r\n                    )}\r\n                    \r\n                    <div className=\"tpproduct__thumb\">\r\n                        <div className=\"tpproduct__thumbitem p-relative\">\r\n                            <Link href={detailUrl}>\r\n                                <img src={`/assets/img/product/${item.imgf}`} alt=\"product-thumb\" />\r\n                                <img className=\"thumbitem-secondary\" src={`/assets/img/product/${item.imgb}`} alt=\"product-thumb\" />\r\n                            </Link>\r\n                            <div className=\"tpproduct__thumb-bg\">\r\n                                <div className=\"tpproductactionbg\">\r\n                                    <a onClick={() => addToCart(item.id)} className=\"add-to-cart\">\r\n                                        <i className=\"fal fa-shopping-basket\" />\r\n                                    </a>\r\n                                    <Link href=\"#\"><i className=\"fal fa-exchange\" /></Link>\r\n                                    <Link href={detailUrl}><i className=\"fal fa-eye\" /></Link>\r\n                                    <a onClick={() => addToWishlist(item.id)} className=\"wishlist\">\r\n                                        <i className=\"fal fa-heart\" />\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"tpproduct__content-area\">\r\n                        <h3 className=\"tpproduct__title mb-5\">\r\n                            <Link href={detailUrl}>{item.title}</Link>\r\n                        </h3>\r\n                        \r\n                        <div className=\"tpproduct__priceinfo p-relative\">\r\n                            {/* Standard Price Display */}\r\n                            <div className=\"tpproduct__ammount\">\r\n                                {pricingInfo.originalPrice !== pricingInfo.price && (\r\n                                    <span className=\"text-muted text-decoration-line-through me-2\">\r\n                                        {formatPrice(pricingInfo.originalPrice)}\r\n                                    </span>\r\n                                )}\r\n                                <span className=\"text-primary fw-bold\">\r\n                                    {formatPrice(pricingInfo.price)}\r\n                                </span>\r\n                            </div>\r\n                            \r\n                            {/* Corporate Pricing Preview */}\r\n                            {showCorporateFeatures && enhancedItem.corporatePricing.priceTiers?.length > 0 && (\r\n                                <div className=\"corporate-pricing-preview mt-1\">\r\n                                    <small className=\"text-muted\">\r\n                                        Bulk: From {formatPrice(Math.min(...enhancedItem.corporatePricing.priceTiers.map(t => t.pricePerUnit)))}\r\n                                    </small>\r\n                                </div>\r\n                            )}\r\n                            \r\n                            {/* Discount Badge */}\r\n                            {pricingInfo.discount > 0 && (\r\n                                <div className=\"position-absolute top-0 end-0\">\r\n                                    <span className=\"badge bg-danger\">{pricingInfo.discount}% OFF</span>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"tpproduct__ratingarea\">\r\n                        <div className=\"d-flex align-items-center justify-content-between\">\r\n                            <div className=\"tpproductdot\">\r\n                                <Link className=\"tpproductdot__variationitem\" href={detailUrl}>\r\n                                    <div className=\"tpproductdot__termshape\">\r\n                                        <span className=\"tpproductdot__termshape-bg\" />\r\n                                        <span className=\"tpproductdot__termshape-border\" />\r\n                                    </div>\r\n                                </Link>\r\n                                <Link className=\"tpproductdot__variationitem\" href={detailUrl}>\r\n                                    <div className=\"tpproductdot__termshape\">\r\n                                        <span className=\"tpproductdot__termshape-bg red-product-bg\" />\r\n                                        <span className=\"tpproductdot__termshape-border red-product-border\" />\r\n                                    </div>\r\n                                </Link>\r\n                                <Link className=\"tpproductdot__variationitem\" href={detailUrl}>\r\n                                    <div className=\"tpproductdot__termshape\">\r\n                                        <span className=\"tpproductdot__termshape-bg orange-product-bg\" />\r\n                                        <span className=\"tpproductdot__termshape-border orange-product-border\" />\r\n                                    </div>\r\n                                </Link>\r\n                                <Link className=\"tpproductdot__variationitem\" href={detailUrl}>\r\n                                    <div className=\"tpproductdot__termshape\">\r\n                                        <span className=\"tpproductdot__termshape-bg purple-product-bg\" />\r\n                                        <span className=\"tpproductdot__termshape-border purple-product-border\" />\r\n                                    </div>\r\n                                </Link>\r\n                            </div>\r\n                            <div className=\"tpproduct__rating\">\r\n                                <ul>\r\n                                    <li>\r\n                                        <Link href=\"#\"><i className=\"fas fa-star\" /></Link>\r\n                                        <Link href=\"#\"><i className=\"fas fa-star\" /></Link>\r\n                                        <Link href=\"#\"><i className=\"fas fa-star\" /></Link>\r\n                                        <Link href=\"#\"><i className=\"fas fa-star\" /></Link>\r\n                                        <Link href=\"#\"><i className=\"far fa-star\" /></Link>\r\n                                    </li>\r\n                                    <li>\r\n                                        <span>(81)</span>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <style jsx>{`\r\n                .corporate-pricing-preview {\r\n                    font-size: 0.75rem;\r\n                    color: #007bff;\r\n                }\r\n                \r\n                .badge {\r\n                    font-size: 0.65rem;\r\n                }\r\n                \r\n                .position-absolute .badge {\r\n                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n                }\r\n            `}</style>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default EnhancedShopCard\r\n"
        }
    ]
}