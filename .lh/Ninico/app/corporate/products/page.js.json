{
    "sourceFile": "Ninico/app/corporate/products/page.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1753640931824,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1753640931824,
            "name": "Commit-0",
            "content": "'use client'\r\nimport Layout from \"@/components/layout/Layout\"\r\nimport CorporateProtectedRoute from '@/components/auth/CorporateProtectedRoute'\r\nimport Link from \"next/link\"\r\nimport { useState, useEffect, useContext } from \"react\"\r\nimport AuthContext from '@/components/context/AuthContext'\r\nimport { getDisplayPrice, formatPrice, shouldShowCorporatePricing } from '@/util/productPricingHelper'\r\n\r\nexport default function CorporateProducts() {\r\n    const [products, setProducts] = useState([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [filter, setFilter] = useState('all')\r\n    const { user } = useContext(AuthContext)\r\n\r\n    useEffect(() => {\r\n        loadCorporateProducts()\r\n    }, [])\r\n\r\n    const loadCorporateProducts = async () => {\r\n        setLoading(true)\r\n        try {\r\n            // In production, this would fetch from /api/products/corporate\r\n            // For now, using sample data with corporate pricing\r\n            const sampleProducts = [\r\n                {\r\n                    id: 1,\r\n                    name: \"Corporate Gift Package - Premium Set\",\r\n                    price: 499,\r\n                    retailPrice: {\r\n                        mrp: 699,\r\n                        sellingPrice: 499,\r\n                        discount: 10,\r\n                        currency: 'INR'\r\n                    },\r\n                    corporatePricing: {\r\n                        enabled: true,\r\n                        minimumOrderQuantity: 50,\r\n                        priceTiers: [\r\n                            { minQuantity: 50, maxQuantity: 99, pricePerUnit: 450, discount: 10 },\r\n                            { minQuantity: 100, maxQuantity: 499, pricePerUnit: 399, discount: 20 },\r\n                            { minQuantity: 500, maxQuantity: null, pricePerUnit: 349, discount: 30 }\r\n                        ]\r\n                    },\r\n                    image: \"/assets/img/product/product-1.jpg\",\r\n                    category: \"Corporate Gifts\",\r\n                    minOrder: 50\r\n                },\r\n                {\r\n                    id: 2,\r\n                    name: \"Branded Corporate Merchandise\",\r\n                    price: 299,\r\n                    retailPrice: {\r\n                        mrp: 399,\r\n                        sellingPrice: 299,\r\n                        discount: 5,\r\n                        currency: 'INR'\r\n                    },\r\n                    corporatePricing: {\r\n                        enabled: true,\r\n                        minimumOrderQuantity: 100,\r\n                        priceTiers: [\r\n                            { minQuantity: 100, maxQuantity: 249, pricePerUnit: 270, discount: 10 },\r\n                            { minQuantity: 250, maxQuantity: 499, pricePerUnit: 249, discount: 17 },\r\n                            { minQuantity: 500, maxQuantity: null, pricePerUnit: 220, discount: 26 }\r\n                        ]\r\n                    },\r\n                    image: \"/assets/img/product/product-2.jpg\",\r\n                    category: \"Branded Items\",\r\n                    minOrder: 100\r\n                },\r\n                {\r\n                    id: 3,\r\n                    name: \"Executive Office Supplies Bundle\",\r\n                    price: 199,\r\n                    retailPrice: {\r\n                        mrp: 299,\r\n                        sellingPrice: 199,\r\n                        discount: 15,\r\n                        currency: 'INR'\r\n                    },\r\n                    corporatePricing: {\r\n                        enabled: true,\r\n                        minimumOrderQuantity: 25,\r\n                        priceTiers: [\r\n                            { minQuantity: 25, maxQuantity: 49, pricePerUnit: 180, discount: 10 },\r\n                            { minQuantity: 50, maxQuantity: 99, pricePerUnit: 160, discount: 20 },\r\n                            { minQuantity: 100, maxQuantity: null, pricePerUnit: 140, discount: 30 }\r\n                        ]\r\n                    },\r\n                    image: \"/assets/img/product/product-3.jpg\",\r\n                    category: \"Office Supplies\",\r\n                    minOrder: 25\r\n                }\r\n            ]\r\n            \r\n            setProducts(sampleProducts)\r\n        } catch (error) {\r\n            console.error('Error loading corporate products:', error)\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const filteredProducts = products.filter(product => {\r\n        if (filter === 'all') return true\r\n        return product.category.toLowerCase().includes(filter.toLowerCase())\r\n    })\r\n\r\n    if (loading) {\r\n        return (\r\n            <CorporateProtectedRoute>\r\n                <Layout headerStyle={1} footerStyle={2}>\r\n                    <div className=\"container py-5\">\r\n                        <div className=\"text-center\">\r\n                            <div className=\"spinner-border text-primary\" role=\"status\">\r\n                                <span className=\"visually-hidden\">Loading...</span>\r\n                            </div>\r\n                            <p className=\"mt-3\">Loading corporate products...</p>\r\n                        </div>\r\n                    </div>\r\n                </Layout>\r\n            </CorporateProtectedRoute>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <CorporateProtectedRoute>\r\n            <Layout headerStyle={1} footerStyle={2}>\r\n                {/* Header Section */}\r\n                <section className=\"corporate-products-header py-5 bg-primary text-white\">\r\n                    <div className=\"container\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-lg-8\">\r\n                                <h1 className=\"display-5 fw-bold\">Corporate Products</h1>\r\n                                <p className=\"lead\">\r\n                                    Exclusive bulk pricing for corporate clients. Save more with larger quantities.\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"col-lg-4\">\r\n                                <div className=\"corporate-benefits-box bg-white text-dark p-4 rounded\">\r\n                                    <h6 className=\"fw-bold text-primary\">Corporate Benefits</h6>\r\n                                    <ul className=\"list-unstyled small mb-0\">\r\n                                        <li>✓ Volume discounts up to 40%</li>\r\n                                        <li>✓ Custom packaging</li>\r\n                                        <li>✓ Priority support</li>\r\n                                        <li>✓ Flexible payment terms</li>\r\n                                    </ul>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n\r\n                {/* Filter Section */}\r\n                <section className=\"py-4 bg-light\">\r\n                    <div className=\"container\">\r\n                        <div className=\"row align-items-center\">\r\n                            <div className=\"col-md-6\">\r\n                                <h5 className=\"mb-3 mb-md-0\">Filter Products</h5>\r\n                            </div>\r\n                            <div className=\"col-md-6\">\r\n                                <div className=\"d-flex gap-2 flex-wrap\">\r\n                                    <button \r\n                                        className={`btn ${filter === 'all' ? 'btn-primary' : 'btn-outline-primary'} btn-sm`}\r\n                                        onClick={() => setFilter('all')}\r\n                                    >\r\n                                        All Products\r\n                                    </button>\r\n                                    <button \r\n                                        className={`btn ${filter === 'gifts' ? 'btn-primary' : 'btn-outline-primary'} btn-sm`}\r\n                                        onClick={() => setFilter('gifts')}\r\n                                    >\r\n                                        Corporate Gifts\r\n                                    </button>\r\n                                    <button \r\n                                        className={`btn ${filter === 'branded' ? 'btn-primary' : 'btn-outline-primary'} btn-sm`}\r\n                                        onClick={() => setFilter('branded')}\r\n                                    >\r\n                                        Branded Items\r\n                                    </button>\r\n                                    <button \r\n                                        className={`btn ${filter === 'office' ? 'btn-primary' : 'btn-outline-primary'} btn-sm`}\r\n                                        onClick={() => setFilter('office')}\r\n                                    >\r\n                                        Office Supplies\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n\r\n                {/* Products Grid */}\r\n                <section className=\"py-5\">\r\n                    <div className=\"container\">\r\n                        <div className=\"row\">\r\n                            {filteredProducts.map(product => {\r\n                                const pricingInfo = getDisplayPrice(product, user, product.minOrder)\r\n                                const lowestTierPrice = product.corporatePricing?.priceTiers?.length > 0 ? \r\n                                    Math.min(...product.corporatePricing.priceTiers.map(t => t.pricePerUnit)) : pricingInfo.price\r\n\r\n                                return (\r\n                                    <div key={product.id} className=\"col-lg-4 col-md-6 mb-4\">\r\n                                        <div className=\"card h-100 corporate-product-card\">\r\n                                            <div className=\"position-relative\">\r\n                                                <img \r\n                                                    src={product.image} \r\n                                                    className=\"card-img-top\" \r\n                                                    alt={product.name}\r\n                                                    style={{ height: '250px', objectFit: 'cover' }}\r\n                                                />\r\n                                                <div className=\"position-absolute top-0 start-0 m-2\">\r\n                                                    <span className=\"badge bg-primary\">Corporate Exclusive</span>\r\n                                                </div>\r\n                                                {product.corporatePricing?.priceTiers?.length > 0 && (\r\n                                                    <div className=\"position-absolute top-0 end-0 m-2\">\r\n                                                        <span className=\"badge bg-success\">\r\n                                                            Up to {Math.max(...product.corporatePricing.priceTiers.map(t => t.discount))}% Off\r\n                                                        </span>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                            \r\n                                            <div className=\"card-body d-flex flex-column\">\r\n                                                <h5 className=\"card-title\">{product.name}</h5>\r\n                                                <p className=\"text-muted small\">{product.category}</p>\r\n                                                \r\n                                                {/* Pricing Display */}\r\n                                                <div className=\"pricing-section mb-3\">\r\n                                                    <div className=\"retail-price text-muted small\">\r\n                                                        Retail: <span className=\"text-decoration-line-through\">{formatPrice(pricingInfo.originalPrice)}</span>\r\n                                                    </div>\r\n                                                    <div className=\"corporate-price\">\r\n                                                        <span className=\"h6 text-primary mb-0\">\r\n                                                            From {formatPrice(lowestTierPrice)}/unit\r\n                                                        </span>\r\n                                                    </div>\r\n                                                    <div className=\"min-order text-muted small\">\r\n                                                        Min. order: {product.minOrder} units\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                {/* Tier Preview */}\r\n                                                {shouldShowCorporatePricing(user, product) && (\r\n                                                    <div className=\"tiers-preview mb-3\">\r\n                                                        <small className=\"text-muted\">Bulk Pricing:</small>\r\n                                                        <div className=\"small\">\r\n                                                            {product.corporatePricing.priceTiers.slice(0, 2).map((tier, index) => (\r\n                                                                <div key={index} className=\"d-flex justify-content-between\">\r\n                                                                    <span>{tier.minQuantity}+ units:</span>\r\n                                                                    <span className=\"text-primary fw-bold\">{formatPrice(tier.pricePerUnit)}</span>\r\n                                                                </div>\r\n                                                            ))}\r\n                                                            {product.corporatePricing.priceTiers.length > 2 && (\r\n                                                                <div className=\"text-center\">\r\n                                                                    <small className=\"text-muted\">...and more tiers</small>\r\n                                                                </div>\r\n                                                            )}\r\n                                                        </div>\r\n                                                    </div>\r\n                                                )}\r\n\r\n                                                <div className=\"mt-auto\">\r\n                                                    <Link \r\n                                                        href={`/corporate/shop-details/${product.id}`}\r\n                                                        className=\"btn btn-primary w-100\"\r\n                                                    >\r\n                                                        View Details & Order\r\n                                                    </Link>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            })}\r\n                        </div>\r\n\r\n                        {filteredProducts.length === 0 && (\r\n                            <div className=\"text-center py-5\">\r\n                                <h4>No products found</h4>\r\n                                <p className=\"text-muted\">Try adjusting your filters or contact support for custom requirements.</p>\r\n                                <button \r\n                                    className=\"btn btn-primary\"\r\n                                    onClick={() => setFilter('all')}\r\n                                >\r\n                                    View All Products\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </section>\r\n\r\n                {/* CTA Section */}\r\n                <section className=\"py-5 bg-light\">\r\n                    <div className=\"container\">\r\n                        <div className=\"row text-center\">\r\n                            <div className=\"col-lg-8 mx-auto\">\r\n                                <h3>Need Custom Solutions?</h3>\r\n                                <p className=\"lead\">\r\n                                    Our corporate team can help you with custom packaging, branding, and special requirements.\r\n                                </p>\r\n                                <div className=\"d-flex gap-3 justify-content-center flex-wrap\">\r\n                                    <button className=\"btn btn-primary btn-lg\">\r\n                                        <i className=\"fal fa-phone me-2\"></i>\r\n                                        Contact Corporate Team\r\n                                    </button>\r\n                                    <button className=\"btn btn-outline-primary btn-lg\">\r\n                                        <i className=\"fal fa-file-alt me-2\"></i>\r\n                                        Request Custom Quote\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n\r\n                <style jsx>{`\r\n                    .corporate-product-card {\r\n                        transition: transform 0.3s ease, box-shadow 0.3s ease;\r\n                        border: none;\r\n                        box-shadow: 0 2px 8px rgba(0,0,0,0.1);\r\n                    }\r\n                    \r\n                    .corporate-product-card:hover {\r\n                        transform: translateY(-5px);\r\n                        box-shadow: 0 8px 25px rgba(0,0,0,0.15);\r\n                    }\r\n                    \r\n                    .pricing-section {\r\n                        background: #f8f9fa;\r\n                        padding: 1rem;\r\n                        border-radius: 8px;\r\n                        border-left: 4px solid #007bff;\r\n                    }\r\n                    \r\n                    .tiers-preview {\r\n                        background: #e3f2fd;\r\n                        padding: 0.75rem;\r\n                        border-radius: 6px;\r\n                    }\r\n                    \r\n                    .corporate-benefits-box {\r\n                        box-shadow: 0 4px 12px rgba(0,0,0,0.1);\r\n                    }\r\n                `}</style>\r\n            </Layout>\r\n        </CorporateProtectedRoute>\r\n    )\r\n}\r\n"
        }
    ]
}